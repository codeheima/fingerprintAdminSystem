<html>

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	
	<title>easyMoreTplTable</title>
	
	<script src="../../jquery-1.8.1.js"></script>
	
	<script src="../build/ctj-all-0.1.js"></script>
	
</head>

<body id="body">

	<h1>easyMoreTplTable</h1>
	<a href="../plugins/easyMoreTplTable.js" target="blank">easyMoreTplTable.js</a>
	
	<div id="div1" view="test" style="width:">1333 </div>
	<div id="moreBtn"> <button >更多</button></div>
	

</body>
<script language="javaScript">
	//设置tpl
	var tpl = new $CTJ.Template(
		'<span><div clickMark="clickName" >{name} </div>' +
		'<div clickMark="clickAddr" >{addr} </div><br/></span>' 
	);
	tpl.compile(); 
	
	//编辑panel
	var panel = new $CTJ.plugin.easyMoreTplTable({
		url:'123',
		mainPanel:$('#div1'),             //mainPanel
		moreControlPanel : $('#moreBtn'),     //morePanel  如果想有翻页效果，这个值必须传入,不然全部显示
		tpl:tpl,
		page:{
			pageSize : 5,
			way : 'local'          // way :  local || ajax   (默认 local)
		},
		listeners:{
			onRowClick:function(e,data,tr,mainDiv){
				console.log('click row...' );
				console.log(data);
			},         //单击事件     e,data,tr,mainDiv
			rowContextmenu: function(e,data,tr,mainDiv){
				console.log('rowContextmenu row...' );
				console.log(data);
			},     // 右键菜单   e,data,tr,mainDiv
			itemClick:{
				clickName : function( e,data,attrVal,jqItemTemp,mainDiv ){
					console.log(attrVal);
				
				},
				clickAddr : function ( e,data,attrVal,jqItemTemp,mainDiv ){
					console.log(attrVal);
				}
			},			//目标itemClick  e,data,attrVal,jqItemTemp,mainDiv   需要配合[clickMark 标签]
			afterLoadByPages:function(datas,mainDiv){
				console.log('afterLoadByPages ...');
			}//查询数据完成时  datas,mainDiv
		}
	});
	
	
	var arr = [];
	for(var i = 1 ; i<= 20; i++){
		var obj = {
			name : 'n' + i,
			addr : 'addr' + i
		};
		arr.push(obj);
	}
	//加载数据...
	panel.loadByData(arr);
	
	
</script>

</html>